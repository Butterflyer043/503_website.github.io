"0","library(forecast)"
"0","library(lubridate)"
"0","df_ts = read.csv(""/Users/butterflyer/Desktop/OneDrive - AIOS/GU/ANLY 503 VIS/project/State_time_series.csv"")"
"0","df_ts = df_ts[df_ts$RegionName != ""UnitedStates"",]"
"0","df_ts$Date = as.Date(df_ts$Date )"
"0","df_ts = df_ts %>% filter(Date >= as.Date(""2010-01-01"")) "
"0","df_ts = df_ts %>% select(1,11) %>% group_by(Date) %>%  summarise_all(funs(mean), na.rm = TRUE) %>% rename( Listing.Price=MedianListingPricePerSqft_AllHomes)"
"0",""
"0","sarima.fit=auto.arima(df_ts$Listing.Price,seasonal = TRUE)"
"0","pred.fit = forecast(sarima.fit,12)"
"0","df_ts2 = df_ts %>% filter(Date >= as.Date(""2015-01-01"")) %>% select(1)"
"0","df_plotpred = data.frame(date=c(df_ts2$Date,ymd(""2018-01-31"") %m+% months(0:11)),value = c(rep(NA,36),pred.fit$mean))"
"0","df_plotpred['lower'] =  c(rep(NA,36),pred.fit$lower[,1])"
"0","df_plotpred['upper'] = c(rep(NA,36),pred.fit$upper[,1])"
"0",""
"0",""
"0","p=  ggplot() +"
"0","    geom_line(data = df_ts %>% filter(Date >= as.Date(""2015-01-01"")),aes(Date,Listing.Price ),color=""#583d72"") +"
"0","      geom_line(data=df_plotpred,aes(date, value),color=""#583d72"")+"
"0","      geom_ribbon(data = df_plotpred,aes(x = date, ymax = upper, ymin = lower),fill=""#583d72"", alpha = 0.5) +"
"0","  scale_x_date(date_breaks = ""6 month"", date_labels = ""%b.%y"")+ theme_ipsum()+rremove('xlab')+rremove('ylab')"
"0",""
"0",""
